{"ast":null,"code":"import _objectSpread from \"/home/unix/Downloads/react-hooks-blog-fullstack-master/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/home/unix/Downloads/react-hooks-blog-fullstack-master/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/unix/Downloads/react-hooks-blog-fullstack-master/Client/src/Profile/profile.js\";\nimport React, { useContext, useState, useEffect } from 'react';\nimport Context from '../utils/context';\nimport { Link } from 'react-router-dom';\nimport history from '../utils/history';\nimport axios from 'axios';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Button from '@material-ui/core/Button';\n\nconst Profile = () => {\n  const context = useContext(Context);\n\n  const _useState = useState({\n    open: false,\n    post_id: null,\n    posts: []\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        stateLocal = _useState2[0],\n        setState = _useState2[1];\n\n  useEffect(() => {\n    const user_id = context.dbProfileState[0].uid;\n    axios.get('/api/get/userposts', {\n      params: {\n        user_id: user_id\n      }\n    }).then(res => setState(_objectSpread({}, stateLocal, {\n      posts: [...res.data]\n    }))).catch(err => console.log(err));\n  });\n\n  const handleClickOpen = pid => {\n    setState({\n      open: true,\n      post_id: pid\n    });\n  };\n\n  const handleClickClose = () => {\n    setState({\n      open: false,\n      post_id: null\n    });\n  };\n\n  const DeletePost = () => {\n    const post_id = stateLocal.post_id;\n    axios.delete('api/delete/postcomments', {\n      data: {\n        post_id: post_id\n      }\n    }).then(() => axios.delete('/api/delete/post', {\n      data: {\n        post_id: post_id\n      }\n    }).then(res => console.log(res))).catch(err => console.log(err)).then(() => handleClickClose()).then(() => setTimeout(() => history.replace('/'), 700));\n  };\n\n  const RenderProfile = props => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }\n    }, props.profile.profile.nickname), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"img\", {\n      src: props.profile.profile.picture,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }\n    }, \" \", props.profile.profile.email), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }\n    }, \" \", props.profile.profile.name, \" \"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"h6\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }\n    }, \" Email Verified: \"), props.profile.profile.email_verified ? /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 49\n      }\n    }, \"Yes\") : /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 62\n      }\n    }, \"No\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }\n    }));\n  };\n\n  const RenderPosts = post => /*#__PURE__*/React.createElement(Card, {\n    style: {\n      width: '500px',\n      height: '200px',\n      marginBottom: '10px',\n      paddingBottom: '80px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CardHeader, {\n    title: /*#__PURE__*/React.createElement(Link, {\n      to: {\n        pathname: '/post/' + post.post.pid,\n        state: {\n          post\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 16\n      }\n    }, post.post.title),\n    subheader: /*#__PURE__*/React.createElement(\"div\", {\n      className: \"FlexColumn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"FlexRow\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 15\n      }\n    }, post.post.date_created), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"FlexRow\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: {\n        pathname: '/editpost/' + post.post.pid,\n        state: {\n          post\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 19\n      }\n    }, \"Edit\")), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => handleClickOpen(post.post.pid),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }\n    }, \"Delete\"))),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      overflow: 'hidden'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, \" \", post.post.body, \" \")));\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: {\n      pathname: \"/showmessages/\" + context.dbProfileState[0].uid\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 14\n    }\n  }, \"Show Messages\")), /*#__PURE__*/React.createElement(RenderProfile, {\n    profile: context.profileState,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }\n  }, stateLocal.posts ? stateLocal.posts.map(post => /*#__PURE__*/React.createElement(RenderPosts, {\n    post: post,\n    key: post.pid,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 19\n    }\n  })) : null), /*#__PURE__*/React.createElement(Dialog, {\n    open: stateLocal.open,\n    onClose: handleClickClose,\n    \"aria-labelledby\": \"alert-dialog-title\",\n    \"aria-describedby\": \"alert-dialog-description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(DialogTitle, {\n    id: \"alert-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 15\n    }\n  }, \" Confirm Delete? \"), /*#__PURE__*/React.createElement(DialogContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(DialogContentText, {\n    id: \"alert-dialog-description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 19\n    }\n  }, \"Deleteing Post\"), /*#__PURE__*/React.createElement(DialogActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: () => DeletePost(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 23\n    }\n  }, \"Agree\"), /*#__PURE__*/React.createElement(Button, {\n    onClick: () => handleClickClose(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 23\n    }\n  }, \"Cancel\")))));\n};\n\nexport default Profile;","map":{"version":3,"sources":["/home/unix/Downloads/react-hooks-blog-fullstack-master/Client/src/Profile/profile.js"],"names":["React","useContext","useState","useEffect","Context","Link","history","axios","Card","CardContent","CardHeader","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","Button","Profile","context","open","post_id","posts","stateLocal","setState","user_id","dbProfileState","uid","get","params","then","res","data","catch","err","console","log","handleClickOpen","pid","handleClickClose","DeletePost","delete","setTimeout","replace","RenderProfile","props","profile","nickname","picture","email","name","email_verified","RenderPosts","post","width","height","marginBottom","paddingBottom","pathname","state","title","date_created","overflow","body","profileState","map"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\r\nimport Context from '../utils/context';\r\n\r\nimport { Link } from 'react-router-dom';\r\nimport history from '../utils/history';\r\nimport axios from 'axios';\r\n\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Button from '@material-ui/core/Button';\r\n\r\n\r\nconst Profile = () => {\r\n  const context = useContext(Context)\r\n\r\n  const [stateLocal, setState] = useState({ open: false,\r\n                                            post_id: null,\r\n                                            posts: []\r\n                                          })\r\n\r\n  useEffect(() => {\r\n    const user_id = context.dbProfileState[0].uid\r\n    axios.get('/api/get/userposts', {params: { user_id: user_id}})\r\n      .then((res) => setState({...stateLocal, posts: [...res.data] }))\r\n      .catch((err) => console.log(err))\r\n  })\r\n\r\n  const handleClickOpen = (pid) => {\r\n    setState({open: true, post_id: pid })\r\n  }\r\n\r\n  const handleClickClose = () => {\r\n    setState({open: false, post_id: null })\r\n  }\r\n\r\n  const DeletePost = () => {\r\n    const post_id = stateLocal.post_id\r\n    axios.delete('api/delete/postcomments', {data: { post_id: post_id }} )\r\n      .then(() => axios.delete('/api/delete/post', {data: { post_id: post_id }} )\r\n          .then(res => console.log(res) ) )\r\n      .catch(err => console.log(err))\r\n      .then(() => handleClickClose())\r\n      .then(() => setTimeout(() => history.replace('/'), 700 ) )\r\n  }\r\n\r\n  const RenderProfile = (props) => {\r\n    return(\r\n      <div>\r\n        <h1>{props.profile.profile.nickname}</h1>\r\n        <br />\r\n        <img src={props.profile.profile.picture} alt=\"\" />\r\n        <br />\r\n        <h4> {props.profile.profile.email}</h4>\r\n        <br />\r\n        <h5> {props.profile.profile.name} </h5>\r\n        <br />\r\n        <h6> Email Verified: </h6>\r\n        {props.profile.profile.email_verified ? <p>Yes</p> : <p>No</p> }\r\n        <br />\r\n      </div>\r\n\r\n     )\r\n   }\r\n\r\n  const RenderPosts = post => (\r\n    <Card style={{width: '500px', height: '200px', marginBottom: '10px', paddingBottom: '80px' }}>\r\n      <CardHeader\r\n        title={<Link to={{pathname:'/post/' + post.post.pid, state: {post}}}>\r\n                  {post.post.title}\r\n                </Link> }\r\n        subheader={\r\n            <div className=\"FlexColumn\">\r\n              <div className=\"FlexRow\">\r\n                {post.post.date_created}\r\n              </div>\r\n              <div className=\"FlexRow\">\r\n                <Link to={{pathname:'/editpost/' + post.post.pid, state:{post} }}>\r\n                  <button>\r\n                   Edit\r\n                  </button>\r\n                </Link>\r\n                <button onClick={() => handleClickOpen(post.post.pid) }>\r\n                 Delete\r\n                </button>\r\n              </div>\r\n            </div>\r\n            }\r\n          />\r\n      <br />\r\n      <CardContent>\r\n        <span style={{overflow: 'hidden' }}> {post.post.body} </span>\r\n      </CardContent>\r\n\r\n    </Card>\r\n  );\r\n\r\n\r\n      return(\r\n          <div>\r\n            <div>\r\n            <Link to={{pathname:\"/showmessages/\" + context.dbProfileState[0].uid }}>\r\n             <Button variant=\"contained\" color=\"primary\" type=\"submit\">\r\n               Show Messages\r\n              </Button>\r\n            </Link>\r\n            <RenderProfile profile={context.profileState} />\r\n            </div>\r\n            <div>\r\n              {stateLocal.posts\r\n                ? stateLocal.posts.map(post =>\r\n                  <RenderPosts post={post} key={post.pid} /> )\r\n                : null }\r\n            </div>\r\n            <Dialog\r\n              open={stateLocal.open}\r\n              onClose={handleClickClose}\r\n              aria-labelledby=\"alert-dialog-title\"\r\n              aria-describedby=\"alert-dialog-description\"\r\n            >\r\n              <DialogTitle id=\"alert-dialog-title\"> Confirm Delete? </DialogTitle>\r\n                <DialogContent>\r\n                  <DialogContentText\r\n                    id=\"alert-dialog-description\"\r\n                    >\r\n                      Deleteing Post\r\n                    </DialogContentText>\r\n                    <DialogActions>\r\n                      <Button onClick={() => DeletePost() }>\r\n                        Agree\r\n                      </Button>\r\n                      <Button onClick={() => handleClickClose()}>\r\n                        Cancel\r\n                      </Button>\r\n                  </DialogActions>\r\n                </DialogContent>\r\n            </Dialog>\r\n\r\n          </div>\r\n  )}\r\n\r\n\r\n\r\nexport default (Profile);\r\n"]},"metadata":{},"sourceType":"module"}
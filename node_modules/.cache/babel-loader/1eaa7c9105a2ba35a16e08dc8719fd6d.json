{"ast":null,"code":"var _jsxFileName = \"/home/unix/Downloads/react-hooks-blog-fullstack-master/Client/src/utils/authcheck.js\";\nimport React, { useEffect, useContext } from 'react';\nimport history from './history';\nimport Context from './context';\nimport axios from 'axios';\n\nconst AuthCheck = () => {\n  const context = useContext(Context);\n  useEffect(() => {\n    if (context.authObj.isAuthenticated()) {\n      const profile = context.authObj.userProfile;\n      context.handleUserLogin();\n      context.handleUserAddProfile(profile);\n      axios.post('/api/posts/userprofiletodb', profile).then(axios.get('/api/get/userprofilefromdb', {\n        params: {\n          email: profile.profile.email\n        }\n      }).then(res => context.handleAddDBProfile(res.data))).then(history.replace('/'));\n    } else {\n      context.handleUserLogout();\n      context.handleUserRemoveProfile();\n      context.handleUserRemoveProfile();\n      history.replace('/');\n    }\n  }, [context.authObj.userProfile, context]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 9\n    }\n  });\n};\n\nexport default AuthCheck;","map":{"version":3,"sources":["/home/unix/Downloads/react-hooks-blog-fullstack-master/Client/src/utils/authcheck.js"],"names":["React","useEffect","useContext","history","Context","axios","AuthCheck","context","authObj","isAuthenticated","profile","userProfile","handleUserLogin","handleUserAddProfile","post","then","get","params","email","res","handleAddDBProfile","data","replace","handleUserLogout","handleUserRemoveProfile"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,UAA3B,QAA6C,OAA7C;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,OAAP,MAAoB,WAApB;AAEA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,SAAS,GAAG,MAAM;AACtB,QAAMC,OAAO,GAAGL,UAAU,CAACE,OAAD,CAA1B;AAGAH,EAAAA,SAAS,CAAC,MAAM;AACd,QAAGM,OAAO,CAACC,OAAR,CAAgBC,eAAhB,EAAH,EAAsC;AACpC,YAAMC,OAAO,GAAGH,OAAO,CAACC,OAAR,CAAgBG,WAAhC;AACAJ,MAAAA,OAAO,CAACK,eAAR;AACAL,MAAAA,OAAO,CAACM,oBAAR,CAA6BH,OAA7B;AACCL,MAAAA,KAAK,CAACS,IAAN,CAAW,4BAAX,EAAyCJ,OAAzC,EACEK,IADF,CACOV,KAAK,CAACW,GAAN,CAAU,4BAAV,EAAwC;AAACC,QAAAA,MAAM,EAAE;AAACC,UAAAA,KAAK,EAAER,OAAO,CAACA,OAAR,CAAgBQ;AAAxB;AAAT,OAAxC,EACHH,IADG,CACEI,GAAG,IAAIZ,OAAO,CAACa,kBAAR,CAA2BD,GAAG,CAACE,IAA/B,CADT,CADP,EAGEN,IAHF,CAGOZ,OAAO,CAACmB,OAAR,CAAgB,GAAhB,CAHP;AAIF,KARD,MASK;AACHf,MAAAA,OAAO,CAACgB,gBAAR;AACAhB,MAAAA,OAAO,CAACiB,uBAAR;AACAjB,MAAAA,OAAO,CAACiB,uBAAR;AACArB,MAAAA,OAAO,CAACmB,OAAR,CAAgB,GAAhB;AACC;AACF,GAhBM,EAgBJ,CAACf,OAAO,CAACC,OAAR,CAAgBG,WAAjB,EAA8BJ,OAA9B,CAhBI,CAAT;AAkBE,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ;AAGE,CAzBN;;AA8BA,eAAeD,SAAf","sourcesContent":["import React, { useEffect, useContext } from 'react';\r\nimport history from './history';\r\nimport Context from './context';\r\n\r\nimport axios from 'axios';\r\n\r\nconst AuthCheck = () => {\r\n  const context = useContext(Context)\r\n\r\n\r\n  useEffect(() => {\r\n    if(context.authObj.isAuthenticated()) {\r\n      const profile = context.authObj.userProfile\r\n      context.handleUserLogin()\r\n      context.handleUserAddProfile(profile)\r\n       axios.post('/api/posts/userprofiletodb', profile )\r\n        .then(axios.get('/api/get/userprofilefromdb', {params: {email: profile.profile.email}})\r\n          .then(res => context.handleAddDBProfile(res.data)) )\r\n        .then(history.replace('/') )\r\n    }\r\n    else {\r\n      context.handleUserLogout()\r\n      context.handleUserRemoveProfile()\r\n      context.handleUserRemoveProfile()\r\n      history.replace('/')\r\n      }\r\n    }, [context.authObj.userProfile, context])\r\n\r\n    return(\r\n        <div>\r\n        </div>\r\n    )}\r\n\r\n\r\n\r\n\r\nexport default AuthCheck;\r\n"]},"metadata":{},"sourceType":"module"}